filetype: nix

detect:
    filename: "\\.nix$"

rules:
    - include: _nix_inner

    - constant.string:
        start: "\""
        end: "\""
        rules:
            - symbol.brackets:
                start: "\\$\\{"
                end: "\\}"
                rules:
                    - default: ".*"
                    - include: _nix_inner

    - constant.string:
        start: "''"
        end: "''"
        rules:
            - symbol.brackets:
                start: "\\$\\{"
                end: "\\}"
                rules:
                    - default: ".*"
                    - include: _nix_inner
